const questions = [

    {
        Titulo: 'fase 1',
        perguntas:[
            {
      question: "Quem construiu a arca?",
      answers: [
        { text: "Moisés", correct: false },
        { text: "Noé", correct: true },
        { text: "Abraão", correct: false },
        { text: "Davi", correct: false },
      ],
    },
    {
      question: "Qual foi o primeiro milagre de Jesus?",
      answers: [
        { text: "Andar sobre as águas", correct: false },
        { text: "Curar um cego", correct: false },
        { text: "Transformar água em vinho", correct: true },
        { text: "Ressuscitar Lázaro", correct: false },
      ],
    },
    {
        question:'(11)  Quem escreveu a Epístola de Judas?',
        answers:[
           { text:'a) Judas irmão de Tiago', correct: true},
           {text:'b) Judas Iscariotes', correct: false},
           {text:'c) João Evangelista', correct: false},
           {text:"d) Lucas ",correct: false}
        
        ]},
        {
        question:'(12) Quem teve seu corpo disputado pelo arcanjo Miguel e o Diabo?',
        answers:[
           { text:'Jesus ', correct: false},
           {text:'Elizeu', correct: false},
           {text:'Moisés', correct: true},
           {text:"Abraão",correct: false}
        
        ]},
        {
        question:'(13) Qual era o nome da profetisa que estava fazendo a igreja de Tiatira cair em imoralidade sexual e idolatria?',
        answers:[
           { text:'Jezabel', correct: true},
           {text:'Lilith', correct: false},
           {text:'Dalila', correct: false},
           {text:"Ester",correct: false}
        
        ]},
        {
        question:'(14) A Morte montada em um cavalo amarelo surgiu na abertura de qual selo em Apocalipse?',
        answers:[
           { text:'a) 1º selo', correct: false},
           {text:'b) 7º selo', correct: false},
           {text:'c) 4º selo', correct: true},
           {text:"d) 6º selo",correct: false}
        
        ]},
        {
        question:'(15) Quem foi a única mulher citada na Bíblia a ter o status de juíza e líder de Israel?',
        answers:[
           { text:'a) Jael', correct: false},
           {text:'b) Débora', correct: true},
           {text:'c) Ester', correct: false},
           {text:"d) Rute",correct: false}
        
        ]},
        {
        question:"(16)  A quem o Apóstolo Paulo chamou de 'médico amado'?",
        answers:[
           { text:'a) Jesus', correct: false},
           {text:'b) Demas', correct: false},
           {text:'c) Lucas', correct: true},
           {text:"d) João",correct: false}
        
        ]},
        {
        question:'(17) Quem governou sendo rei e sacerdote ao mesmo tempo?',
        answers:[
           { text:'a) Joacaz', correct: false},
           {text:'b) Manassés ', correct: false},
           {text:'c) melquias', correct: false},
           {text:"d)  Melquisedeque",correct: true}
        
        ]},
        {
        question:'(18) Que animal mordeu a mão do Apóstolo Paulo?',
        answers:[
           { text:'a) Lagarto', correct: false},
           {text:'b) Escorpião', correct: false},
           {text:'c) Víbora', correct: true},
           {text:"d) Abelha",correct: false}
        
        ]},
        
        {
        question:'(19) Qual era a idade de Calebe quando pediu Hebrom para Josué?',
        answers:[
           { text:'a) 40 anos', correct: false},
           {text:'b) 70 anos', correct: false},
           {text:'c) 120 anos', correct: false},
           {text:"d) 85 anos",correct: true}
        
        ]},]},

        {
        Titulo: 'fase 2',
        perguntas:[
            {

        question:'(20) Por quantas moedas Judas entregou Jesus?',
        answers:[
           { text:'a) 30 moedas de ouro', correct: false},
           {text:'b) 30 moedas de prata', correct: true},
           {text:'c) 100 denários', correct: false},
           {text:"d) 30 moedas de bronze",correct: false}
        
        ]},
        {
        question:"(21) Quem foram apelidados por Jesus de Boanerges que significa 'Filhos do Trovão'?",
        answers:[
           { text:'a) João e Pedro', correct: false},
           {text:'b) lucas e pedro', correct: false},
           {text:'c) Pedro e Tiago', correct: false},
           {text:"João e Tiago",correct: true}
        
        ]},
        {
        question:'(22) Qual era o nome da única filha de Lia?',
        answers:[
           { text:'a) Zilpa', correct: false},
           {text:'b) Diná', correct: true},
           {text:'c) Raquel', correct: false},
           {text:"d)Ester",correct: false}
        
        ]},
        {
        question:'(23) Qual o discípulo que acompanhou Jesus até a sua crucificação?',
        answers:[
           { text:'a) André', correct: false},
           {text:'b) Tiago', correct: false},
           {text:'c) João', correct: true},
           {text:"d) Pedro",correct: false}
        
        ]},
        {
        question:'(24) Quantos capítulos tem o Livro de Naum?',
        answers:[
           { text:'1', correct: false},
           {text:'4', correct: false},
           {text:'5', correct: false},
           {text:"3",correct: true}
        
        ]},
        {
        question:'(25) O Velho Testamento reúne mais livros do que o Novo Testamento?',
        answers:[
           { text:'sim', correct: true},
           {text:'não', correct: false},
           {text:'Ambos tem a mesma quantidade', correct: false},
          
        
        ]},
        {
        question:'(26) A estátua do sonho de Nabucodonosor era composta de quais elementos?',
        answers:[
           { text:'a) Toda em ouro', correct: false},
           {text:'b) Ouro, prata, , onix e ferro', correct: false},
           {text:'Ouro, prata, bronze, onix e ferro', correct: false},
           {text:"d) Ouro, prata, bronze, ferro e barro.",correct: true}
        
        ]},
        {
        question:'(27) Quem era conhecido por ser cobrador de impostos?',
        answers:[
           { text:'a) Zacarias', correct: false},
           {text:'b) Zebedeu', correct: false},
           {text:'c) Zaqueu', correct: true},
           {text:"d) Zebeus",correct: false}
        
        ]},
        {
        question:'(28) Quanto tempo Jonas ficou preso dentro da barriga de um grande peixe?',
        answers:[
           { text:'a) 7 dias', correct: false},
           {text:'b) 3 dias', correct: true},
           {text:'c) 1 dia', correct: false},
           {text:"d) 4 dias",correct: false}
        
        ]},
        {
        question:'(29) Qual foram os dois nomes indicados para substituir Judas Iscariotes?',
        answers:[
           { text:'a) Barsabás e Matias.', correct: true},
           {text:'b) Paulo e Matias.', correct: false},
           {text:'c) Paulo e José.', correct: false},
           {text:"d) Matias e Paulo",correct: false}
        
        ]},
        {
        question:'(30)  Em Tessalônica, Paulo, Silas e Timóteo se refugiaram na casa de qual irmão?',
        answers:[
           { text:'a) Apolo', correct: false},
           {text:'b) Barnabé', correct: false},
           {text:'c) arquipo', correct: false},
           {text:"d) Jasom",correct: true}
        
        ]},
        {
        question:'(31) Adão viveu ao todo quantos anos?',
        answers:[
           { text:'a) 930 anos', correct: true},
           {text:'b) 1000 anos', correct: false},
           {text:'c) 500 anos', correct: false},
           {text:"d) 850 anos",correct: false}
        
        ]},
        {
        question:'(32) Jesus enviou quantos discípulos para a missão de pregar o Evangelho?',
        answers:[
           { text:'a) 7 discípuloss', correct: false},
           {text:'b) 70 discípulos', correct: true},
           {text:'c) 12 discípulos', correct: false},
           {text:"d) 6 discípulos",correct: false}
        
        ]},
        {
        question:'(33)  Em qual dia da criação foi feito o sol, a lua e as estrelas?',
        answers:[
           { text:'a) 1º dia', correct: false},
           {text:'b) 3º dia', correct: false},
           {text:'c) 4º dia', correct: true},
           {text:"d) 6º dia",correct: false}
        
        ]},
        {
        question:'(34) O Livro de Atos dos Apóstolos é conhecido como...',
        answers:[
           { text:'a) um livro histórico', correct: true},
           {text:'b) um livro profético', correct: false},
           {text:'c) um livro poético', correct: false},
           {text:"d) um livro teologico",correct: false}
        
        ]},
        {
        question:'(35) Depois do Dilúvio, Noé viveu por mais quantos anos?',
        answers:[
           { text:'a) 350 anos', correct: true},
           {text:'b) 100 anos', correct: false},
           {text:'c) 200 anos', correct: false},
           {text:"d) 50 anos",correct: false}
        
        ]},
        {
        question:'(36) Qual é o quinto livro do Novo Testamento?',
        answers:[
           { text:'a)Evangelho de Marcos', correct: false},
           {text:'b) Carta aos Romanos', correct: false},
           {text:'c) Atos dos Apóstolos', correct: true},
           {text:"d) Evangelho de lucas",correct: false}
        
        ]},]},

        {
            Titulo: 'fase 2',
            perguntas:[
        {
        question:'(37) Qual era o nome da mulher de Jó?',
        answers:[
           { text:'a)Abgail', correct: false},
           {text:'b) Dâmares', correct: false},
           {text:'c) A BIBLIA NÃO DIZ', correct: true},
           {text:"d) Sophia",correct: false}
        
        ]},
        {
        question:'(38)  Quem Noé amaldiçoou após saber que foi visto em nudez?',
        answers:[
           { text:'a) Canaã', correct: true},
           {text:'b) Cam', correct: false},
           {text:'c) Jafé', correct: false},
           {text:"d) Ezau",correct: false}
        
        ]},
        {
        question:'(39) Qual das alternativas não é um livro apócrifo?',
        answers:[
           { text:'a) Livro Enoque', correct: false},
           {text:'b) Livro de Ageu', correct: true},
           {text:'c) Livro de Tobias', correct: false},
           {text:"d) Livro de Thomas",correct: false}
        
        ]},
        {
        question:'(40) Qual destes livros contém mais de um capítulo?',
        answers:[
           { text:'a) Judas', correct: false},
           {text:'b) Obadias', correct: false},
           {text:'c) Joel', correct: true},
           
        
        ]},
        {
        question:'(41) Qual é o versículo mais extenso da Bíblia?',
        answers:[
           { text:'a)Ester 8:9', correct: true},
           {text:'b) Salmos 119:43', correct: false},
           {text:'c) Isaías 24:2', correct: false},
           {text:"d) jeremias 3:5",correct: false}
        
        ]},
        {
           question: "(42) Quantos versículos tem Salmos 119?",
           answers: [
               { text: "a) 176 versículos", correct: true },
               { text: "b) 200 versículos.", correct: false },
               { text: "c) 100 versículos.", correct: false },
               { text: "d) 150 versículos.", correct: false }
           ]},
       {
           question: "(43) Qual a mulher que acolheu o seu inimigo e depois o matou? (Juízes 4:18-21)",
           answers: [
               { text: "a) Raquel", correct: false },
               { text: "b) Débora", correct: false },
               { text: "c) Jael", correct: true },
               { text: "d) Rebeca", correct: false }
           ]
       },
       {
           question: "(44) Que homem depois de morto, matou mais pessoas do que em vida? (Juízes 16:30)",
           answers: [
               { text: "a) Elias", correct: false },
               { text: "b) Sansão", correct: true },
               { text: "c) Judas", correct: false },
               { text: "d) Davi", correct: false }
           ]
       },
       {
           question: "(45) Quem se tornou rei enquanto procurava as jumentas do seu pai? (1 Samuel 9:3)",
           answers: [
               { text: "a) Davi", correct: false },
               { text: "b) Saul", correct: true },
               { text: "c) Acabe", correct: false },
               { text: "d) Salomão", correct: false }
           ]
       },]}
    // Adicione mais perguntas aqui...
  ];
  
  const questionElement = document.querySelector(".question");
  const answerButtons = document.querySelector(".answers-container");
  const startButton = document.querySelector(".start-quiz");
  const nextButton = document.querySelector(".next-question");
  const questionContainer = document.querySelector(".questions-container");
  const playerNameInput = document.getElementById("playerName");
  const timeText = document.getElementById("timeText");
  const timerBar = document.getElementById("timerBar");
  
  let currentQuestionIndex = 0;
  let playerName = "";
  let timer;
  let timeLeft = 60;
  let userProgress = JSON.parse(localStorage.getItem("quizProgress")) || { index: 0 };
  
  startButton.addEventListener("click", startGame);
  nextButton.addEventListener("click", () => {
    currentQuestionIndex++;
    showQuestion();
  });
  
  function startGame() {
    playerName = playerNameInput.value || "Anônimo";
    startButton.classList.add("hide");
    questionContainer.classList.remove("hide");
    currentQuestionIndex = userProgress.index || 0;
    showQuestion();
  }
  
  function showQuestion() {
    resetState();
    if (currentQuestionIndex >= questions.length) {
      finishQuiz();
      return;
    }
  
    const question = questions[currentQuestionIndex];
    questionElement.innerText = `${currentQuestionIndex + 1}. ${question.question}`;
  
    question.answers.forEach((answer) => {
      const button = document.createElement("button");
      button.innerText = answer.text;
      button.classList.add("answer");
      if (answer.correct) button.dataset.correct = true;
      button.addEventListener("click", selectAnswer);
      answerButtons.appendChild(button);
    });
  
    startTimer();
  }
  
  function resetState() {
    clearInterval(timer);
    timeLeft = 60;
    timeText.innerText = `Tempo restante: ${timeLeft}s`;
    timerBar.style.width = "100%";
    nextButton.classList.add("hide");
    while (answerButtons.firstChild) {
      answerButtons.removeChild(answerButtons.firstChild);
    }
  }
  
  function startTimer() {
    timer = setInterval(() => {
      timeLeft--;
      timeText.innerText = `Tempo restante: ${timeLeft}s`;
      timerBar.style.width = `${(timeLeft / 60) * 100}%`;
      if (timeLeft <= 0) {
        clearInterval(timer);
        nextButton.classList.remove("hide");
      }
    }, 1000);
  }
  
  function selectAnswer(e) {
    clearInterval(timer);
    const selectedButton = e.target;
    const correct = selectedButton.dataset.correct === "true";
  
    // Marcar respostas
    Array.from(answerButtons.children).forEach((button) => {
      button.disabled = true;
      if (button.dataset.correct === "true") {
        button.style.backgroundColor = "green";
      } else {
        button.style.backgroundColor = "red";
      }
    });
  
    nextButton.classList.remove("hide");
  
    saveProgress(currentQuestionIndex + 1);
  
    registrarResposta(playerName, questions[currentQuestionIndex].question, selectedButton.innerText, correct);
  }
  
  function saveProgress(index) {
    localStorage.setItem("quizProgress", JSON.stringify({ index }));
  }
  
  function registrarResposta(nome, pergunta, resposta, acertou) {
    fetch("https://pwa-api-production-503d.up.railway.app/api/log-resposta", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        nome,
        pergunta,
        resposta,
        acertou,
        timestamp: new Date().toISOString(),
      }),
    }).then(res => res.json())
      .then(data => console.log("Resposta registrada:", data))
      .catch(err => console.error("Erro ao registrar resposta:", err));
  }
  
  function finishQuiz() {
    questionElement.innerText = "Parabéns! Você concluiu o quiz.";
    answerButtons.innerHTML = "";
    timeText.innerText = "";
    timerBar.style.width = "0%";
    localStorage.removeItem("quizProgress");
    nextButton.classList.add("hide");
    startButton.innerText = "Recomeçar";
    startButton.classList.remove("hide");
  }
  